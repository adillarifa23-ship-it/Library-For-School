<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sistem Perpustakaan</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- JsBarcode -->
  <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>

  <!-- SheetJS (xlsx) -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-100 flex">

  <!-- Sidebar -->
  <aside id="sidebar" class="w-64 h-screen bg-indigo-900 text-white flex flex-col transition-transform duration-300">
    <div class="p-4 flex items-center justify-between border-b border-indigo-700">
      <span class="text-2xl font-bold flex items-center gap-2">
        <i class="fas fa-book-reader"></i> <span>Perpustakaan</span>
      </span>
      <button onclick="toggleSidebar()" class="md:hidden">
        <i class="fas fa-bars"></i>
      </button>
    </div>

    <nav class="flex-1 p-2 overflow-y-auto space-y-1">
      <!-- Beranda -->
      <a href="#" onclick="showPage('beranda')" 
         class="flex items-center p-2 rounded-lg hover:bg-indigo-700 transition">
        <i class="fas fa-home"></i>
        <span class="ml-2">Beranda</span>
      </a>

      <!-- Data Buku -->
      <div>
        <button onclick="toggleMenu('menuBuku')" 
                class="w-full flex items-center p-2 rounded-lg hover:bg-indigo-700 transition">
          <i class="fas fa-book"></i>
          <span class="ml-2 flex-1 text-left">Data Buku</span>
          <i id="icon-menuBuku" class="fas fa-chevron-down text-sm"></i>
        </button>
        <div id="menuBuku" 
             class="ml-8 mt-1 max-h-0 overflow-hidden transition-all duration-300 space-y-1 text-sm">
          <a href="#" onclick="showPage('daftarBuku')" class="block p-1 hover:text-yellow-300">
            <i class="fas fa-list"></i> Daftar Buku
          </a>
          <a href="#" onclick="showPage('tambahBuku')" class="block p-1 hover:text-yellow-300">
            <i class="fas fa-plus"></i> Tambah Buku
          </a>
          <a href="#" onclick="showPage('importBuku')" class="block p-1 hover:text-yellow-300">
            <i class="fas fa-file-import"></i> Import/Export
          </a>
          <a href="#" onclick="showPage('klasifikasi')" class="block p-1 hover:text-yellow-300">
            <i class="fas fa-layer-group"></i> Klasifikasi & Rak
          </a>
          <a href="#" onclick="showPage('cetakLabel')" class="block p-1 hover:text-yellow-300">
            <i class="fas fa-tags"></i> Cetak Label
          </a>
          <a href="#" onclick="showPage('cetakBarcode')" class="block p-1 hover:text-yellow-300">
            <i class="fas fa-barcode"></i> Cetak Barcode
          </a>
        </div>
      </div>

      <!-- Data Anggota -->
      <div>
        <button onclick="toggleMenu('menuAnggota')" 
                class="w-full flex items-center p-2 rounded-lg hover:bg-indigo-700 transition">
          <i class="fas fa-users"></i>
          <span class="ml-2 flex-1 text-left">Data Anggota</span>
          <i id="icon-menuAnggota" class="fas fa-chevron-down text-sm"></i>
        </button>
        <div id="menuAnggota" 
             class="ml-8 mt-1 max-h-0 overflow-hidden transition-all duration-300 space-y-1 text-sm">
          <a href="#" onclick="showPage('daftarAnggota')" class="block p-1 hover:text-yellow-300">
            <i class="fas fa-list"></i> Daftar Anggota
          </a>
          <a href="#" onclick="showPage('tambahAnggota')" class="block p-1 hover:text-yellow-300">
            <i class="fas fa-user-plus"></i> Tambah Anggota
          </a>
          <a href="#" onclick="showPage('importAnggota')" class="block p-1 hover:text-yellow-300">
            <i class="fas fa-file-import"></i> Import/Export
          </a>
          <a href="#" onclick="showPage('cetakKartu')" class="block p-1 hover:text-yellow-300">
            <i class="fas fa-id-card"></i> Cetak Kartu
          </a>
        </div>
      </div>

      <!-- Sirkulasi -->
      <div>
        <button onclick="toggleMenu('menuSirkulasi')" 
                class="w-full flex items-center p-2 rounded-lg hover:bg-indigo-700 transition">
          <i class="fas fa-exchange-alt"></i>
          <span class="ml-2 flex-1 text-left">Sirkulasi</span>
          <i id="icon-menuSirkulasi" class="fas fa-chevron-down text-sm"></i>
        </button>
        <div id="menuSirkulasi" 
             class="ml-8 mt-1 max-h-0 overflow-hidden transition-all duration-300 space-y-1 text-sm">
          <a href="#" onclick="showPage('peminjaman')" class="block p-1 hover:text-yellow-300">
            <i class="fas fa-sign-out-alt"></i> Peminjaman
          </a>
          <a href="#" onclick="showPage('pengembalian')" class="block p-1 hover:text-yellow-300">
            <i class="fas fa-sign-in-alt"></i> Pengembalian
          </a>
          <a href="#" onclick="showPage('dataPeminjaman')" class="block p-1 hover:text-yellow-300">
            <i class="fas fa-table"></i> Data Peminjaman
          </a>
          <a href="#" onclick="showPage('dataPengembalian')" class="block p-1 hover:text-yellow-300">
            <i class="fas fa-table"></i> Data Pengembalian
          </a>
          <a href="#" onclick="showPage('perpanjangan')" class="block p-1 hover:text-yellow-300">
            <i class="fas fa-history"></i> Perpanjangan
          </a>
          <a href="#" onclick="showPage('riwayat')" class="block p-1 hover:text-yellow-300">
            <i class="fas fa-clipboard-list"></i> Riwayat Pinjam
          </a>
        </div>
      </div>

      <!-- Laporan -->
      <div>
        <button onclick="toggleMenu('menuLaporan')" 
                class="w-full flex items-center p-2 rounded-lg hover:bg-indigo-700 transition">
          <i class="fas fa-file-alt"></i>
          <span class="ml-2 flex-1 text-left">Laporan</span>
          <i id="icon-menuLaporan" class="fas fa-chevron-down text-sm"></i>
        </button>
        <div id="menuLaporan" 
             class="ml-8 mt-1 max-h-0 overflow-hidden transition-all duration-300 space-y-1 text-sm">
          <a href="#" onclick="showPage('laporanDenda')" class="block p-1 hover:text-yellow-300">
            <i class="fas fa-file-invoice-dollar"></i> Laporan Denda
          </a>
          <a href="#" onclick="showPage('laporanBukuHilang')" class="block p-1 hover:text-yellow-300">
            <i class="fas fa-book-dead"></i> Laporan Buku Hilang
          </a>
          <a href="#" onclick="showPage('laporanAnggotaAktif')" class="block p-1 hover:text-yellow-300">
            <i class="fas fa-user-check"></i> Laporan Anggota Aktif
          </a>
        </div>
      </div>
    </nav>
  </aside>


  <!-- Konten Utama -->
  <main class="flex-1 p-6 space-y-8">

    <!-- Halaman Beranda -->
    <section id="page-beranda">
      <h1 class="text-2xl font-bold mb-4">Selamat Datang di Sistem Perpustakaan SD Negeri 12 Padang Lua</h1>
      <p class="mb-6 text-gray-700">Berikut adalah ringkasan data perpustakaan Anda.</p>

      <!-- Cards Statistik -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
        <div class="bg-white shadow-md rounded-lg p-4 flex flex-col items-center">
          <i class="fas fa-book text-indigo-900 text-2xl mb-2"></i>
          <h2 class="text-gray-500">Total Buku</h2>
          <p id="stat-total-buku" class="text-2xl font-bold">0</p>
          <!-- ?? Tombol hapus semua buku -->
          <button onclick="hapusSemuaBuku()" 
                  class="mt-2 bg-red-600 text-white px-3 py-1 rounded text-sm">
            Hapus Semua Buku
          </button>
        </div>
        <div class="bg-white shadow-md rounded-lg p-4 flex flex-col items-center">
          <i class="fas fa-users text-indigo-900 text-2xl mb-2"></i>
          <h2 class="text-gray-500">Total Anggota</h2>
          <p id="stat-total-anggota" class="text-2xl font-bold">0</p>
          <!-- ?? Tombol hapus semua anggota -->
          <button onclick="hapusSemuaAnggota()" 
                  class="mt-2 bg-red-600 text-white px-3 py-1 rounded text-sm">
            Hapus Semua Anggota
          </button>
        </div>
        <div class="bg-white shadow-md rounded-lg p-4 flex flex-col items-center">
          <i class="fas fa-exchange-alt text-indigo-900 text-2xl mb-2"></i>
          <h2 class="text-gray-500">Pinjaman Aktif</h2>
          <p id="stat-total-peminjaman" class="text-2xl font-bold">0</p>
          <!-- ?? Tombol hapus semua peminjaman -->
          <button onclick="hapusSemuaPeminjaman()" 
                  class="mt-2 bg-red-600 text-white px-3 py-1 rounded text-sm">
            Hapus Semua Pinjaman
          </button>
        </div>
        <div class="bg-white shadow-md rounded-lg p-4 flex flex-col items-center">
          <i class="fas fa-clock text-red-600 text-2xl mb-2"></i>
          <h2 class="text-gray-500">Buku Terlambat</h2>
          <p id="stat-total-terlambat" class="text-2xl font-bold text-red-600">0</p>
          <!-- ?? Tombol hapus semua pengembalian (reset keterlambatan) -->
          <button onclick="hapusSemuaPengembalian()" 
                  class="mt-2 bg-red-600 text-white px-3 py-1 rounded text-sm">
            Hapus Semua Pengembalian
          </button>
        </div>
      </div>

      <!-- Grafik -->
      <div class="bg-white shadow-md rounded-lg p-4 mb-6">
        <h2 class="text-lg font-bold mb-4">Grafik Peminjaman 6 Bulan Terakhir</h2>
        <canvas id="chartPeminjaman" height="100"></canvas>
      </div>
    </section>


    <!-- Daftar Buku -->
<section id="page-daftarBuku" class="hidden">
  <h2 class="text-xl font-bold mb-4"><i class="fas fa-book"></i> Daftar Buku</h2>

  <!-- ?? Pencarian Buku -->
  <input id="searchBuku" type="text" placeholder="Cari kode / judul buku..." 
         class="w-full p-2 border rounded mb-3" oninput="renderBooks()">

  <div class="flex gap-2 mb-3">
    <input id="importBukuFile" type="file" accept=".csv, .xlsx" />
    <button onclick="importDataFromFile('books', 'importBukuFile')" 
            class="bg-yellow-500 px-3 py-1 rounded">Import</button>
    <button onclick="exportDataToFile('books', 'books_export')" 
            class="bg-blue-500 px-3 py-1 rounded text-white">Export CSV</button>
    <button onclick="exportDataToXLSX('books', 'books_export.xlsx')" 
            class="bg-green-600 px-3 py-1 rounded text-white">Export XLSX</button>
    <button onclick="hapusSemuaBuku()" 
            class="bg-red-600 px-3 py-1 rounded text-white">Hapus Semua</button>
  </div>

  <table class="w-full bg-white shadow-md rounded-lg overflow-hidden">
    <thead class="bg-indigo-900 text-white">
      <tr>
        <th class="p-2">No</th> <!-- ? Tambah kolom No -->
        <th class="p-2">Judul Buku</th>
        <th class="p-2">Pengarang</th>
        <th class="p-2">Kode Barang</th>
        <th class="p-2">Penerbit</th>
        <th class="p-2">Tahun Terbit</th>
        <th class="p-2">Tempat Terbit</th>
        <th class="p-2">Edisi</th>
        <th class="p-2">Kategori</th>
        <th class="p-2">ISBN</th>
        <th class="p-2">DDC</th>
        <th class="p-2">Halaman</th>
        <th class="p-2">Ukuran</th>
        <th class="p-2">Sumber</th>
        <th class="p-2">Jumlah</th>
        <th class="p-2">Tanggal Masuk</th>
        <th class="p-2">No. Inventaris</th>
        <th class="p-2">Rak</th>
        <th class="p-2">Asal Buku</th>
        <th class="p-2">Sekolah</th>
        <th class="p-2">Harga</th>
	<th class="p-2">Aksi</th> 
      </tr>
    </thead>
    <tbody id="tbody-books"></tbody>
  </table>
 <div id="book-pagination" class="mt-3 flex gap-2 flex-wrap"></div>
</section>

<!-- Tambah Buku -->
<section id="page-tambahBuku" class="hidden">
  <h2 class="text-xl font-bold mb-4"><i class="fas fa-plus"></i> Tambah Buku</h2>
  <form id="form-buku" class="bg-white shadow-md rounded-lg p-4 space-y-3">
    <input name="judul" type="text" placeholder="Judul Buku" class="w-full p-2 border rounded" required>
    <input name="pengarang" type="text" placeholder="Pengarang" class="w-full p-2 border rounded">
    <input name="kodeBarang" type="text" placeholder="Kode Barang" class="w-full p-2 border rounded">
    <input name="penerbit" type="text" placeholder="Penerbit" class="w-full p-2 border rounded">
    <input name="tahun" type="text" placeholder="Tahun Terbit" class="w-full p-2 border rounded">
    <input name="tempat" type="text" placeholder="Tempat Terbit" class="w-full p-2 border rounded">
    <input name="edisi" type="text" placeholder="Edisi" class="w-full p-2 border rounded">
    <input name="kategori" type="text" placeholder="Kategori" class="w-full p-2 border rounded">
    <input name="isbn" type="text" placeholder="ISBN" class="w-full p-2 border rounded">
    <input name="ddc" type="text" placeholder="DDC" class="w-full p-2 border rounded">
    <input name="halaman" type="text" placeholder="Halaman" class="w-full p-2 border rounded">
    <input name="ukuran" type="text" placeholder="Ukuran" class="w-full p-2 border rounded">
    <input name="kataKunci" type="text" placeholder="Kata Kunci" class="w-full p-2 border rounded">
    <input name="sumber" type="text" placeholder="Sumber" class="w-full p-2 border rounded">
    <input name="jumlah" type="number" placeholder="Jumlah" class="w-full p-2 border rounded" min="1">
    <input name="tglMasuk" type="date" placeholder="Tanggal Masuk" class="w-full p-2 border rounded">
    <input name="noInventaris" type="text" placeholder="No. Inventaris" class="w-full p-2 border rounded">
    <input name="rak" type="text" placeholder="Rak" class="w-full p-2 border rounded">
    <input name="asal" type="text" placeholder="Asal Buku" class="w-full p-2 border rounded">
    <input name="sekolah" type="text" placeholder="Sekolah" class="w-full p-2 border rounded">
    <input name="harga" type="number" placeholder="Harga" class="w-full p-2 border rounded" step="0.01">
    <button class="bg-indigo-900 text-white px-4 py-2 rounded" type="submit">Simpan</button>
  </form>
</section>


    <!-- Import/Export Buku (halaman bantuan) -->
    <section id="page-importBuku" class="hidden">
      <h2 class="text-xl font-bold mb-4"><i class="fas fa-file-import"></i> Import / Export Data Buku</h2>
      <p class="text-gray-600">Gunakan tombol import/export di halaman Daftar Buku.</p>
    </section>

    <!-- Klasifikasi & Rak -->
<section id="page-klasifikasi" class="hidden">
  <h2 class="text-xl font-bold mb-4"><i class="fas fa-layer-group"></i> Klasifikasi & Rak Buku</h2>

  <div class="flex gap-2 mb-3">
    <input id="importRakFile" type="file" accept=".csv, .xlsx" />
    <button onclick="importDataFromFile('shelves', 'importRakFile')" class="bg-yellow-500 px-3 py-1 rounded">Import</button>
    <button onclick="exportDataToFile('shelves', 'rak_export')" class="bg-blue-500 px-3 py-1 rounded text-white">Export CSV</button>
    <button onclick="exportDataToXLSX('shelves', 'rak_export.xlsx')" class="bg-green-600 px-3 py-1 rounded text-white">Export XLSX</button>
    <button onclick="hapusSemuaRak()" class="bg-red-600 px-3 py-1 rounded text-white">Hapus Semua</button>
  </div>

  <table class="w-full bg-white shadow-md rounded-lg overflow-hidden">
    <thead class="bg-indigo-900 text-white">
      <tr>
        <th class="p-2">No</th>
        <th class="p-2">Kode Rak</th>
        <th class="p-2">Nama Rak</th>
        <th class="p-2">Aksi</th>
      </tr>
    </thead>
    <tbody id="tbody-klasifikasi"></tbody>
  </table>
</section>


    <!-- Cetak Label -->
<section id="page-cetakLabel" class="hidden">
  <h2 class="text-xl font-bold mb-4"><i class="fas fa-tag"></i> Cetak Label Buku</h2>
  <form id="form-cetak-label" class="space-y-2 bg-white p-4 rounded shadow">
    <input id="labelKode" type="text" placeholder="Masukkan No Inventaris Buku" class="w-full p-2 border rounded">
    <button onclick="generateLabel(event)" class="bg-indigo-900 text-white px-4 py-2 rounded">Cetak Label</button>
  </form>
  <div id="labelArea" class="mt-4"></div>
  <div class="mt-3 flex gap-2">
  <button id="btnPrintLabel" onclick="printLabel()" class="hidden bg-green-600 text-white px-3 py-1 rounded">Print</button>
  <button id="btnCopyLabel" onclick="copyLabel()" class="hidden bg-yellow-500 text-white px-3 py-1 rounded">Salin</button>
  </div>
</section>


    <!-- Cetak Barcode -->
<section id="page-cetakBarcode" class="hidden">
  <h2 class="text-xl font-bold mb-4"><i class="fas fa-barcode"></i> Cetak Barcode Buku</h2>
  <form id="form-barcode-buku" onsubmit="generateBarcode(event)" class="space-y-2 bg-white p-4 rounded shadow">
    <input id="kodeBarcode" name="kodeBarcode" type="text" placeholder="Masukkan Kode Buku" class="w-full p-2 border rounded">
    <button class="bg-indigo-900 text-white px-4 py-2 rounded">Generate Barcode</button>
  </form>
  <div id="barcodeArea" class="mt-4 p-4 border rounded bg-gray-50 text-center"></div>
  <div class="mt-3 flex gap-2">
  <button id="btnPrintBarcode" onclick="printBarcode()" class="hidden bg-green-600 text-white px-3 py-1 rounded">Print</button>
  <button id="btnCopyBarcode" onclick="copyBarcode()" class="hidden bg-yellow-500 text-white px-3 py-1 rounded">Salin</button>
  </div>
  <button id="btnCopyBarcode" onclick="copyBarcode()" 
        class="hidden mt-3 bg-green-600 text-white px-4 py-2 rounded">
  Salin Kode Barcode
  </button>
  <button onclick="printBarcode()" id="btnPrintBarcode"
          class="mt-3 bg-blue-600 text-white px-4 py-2 rounded hidden">
    Print Barcode
  </button>
</section>


    <!-- Daftar Anggota -->
<section id="page-daftarAnggota" class="hidden">
  <h2 class="text-xl font-bold mb-4"><i class="fas fa-users"></i> Daftar Anggota</h2>

  <!-- ?? Pencarian Anggota -->
  <input id="searchAnggota" type="text" placeholder="Cari ID / Nama anggota..." 
         class="w-full p-2 border rounded mb-3" oninput="renderMembers()">

  <div class="flex gap-2 mb-3">
    <input id="importAnggotaFile" type="file" accept=".csv, .xlsx" />
    <button onclick="importDataFromFile('members', 'importAnggotaFile')" 
            class="bg-yellow-500 px-3 py-1 rounded">Import</button>
    <button onclick="exportDataToFile('members', 'members_export')" 
            class="bg-blue-500 px-3 py-1 rounded text-white">Export CSV</button>
    <button onclick="exportDataToXLSX('members', 'members_export.xlsx')" 
            class="bg-green-600 px-3 py-1 rounded text-white">Export XLSX</button>
    <button onclick="hapusSemuaAnggota()" 
            class="bg-red-600 px-3 py-1 rounded text-white">Hapus Semua</button>
  </div>

  <table class="w-full bg-white shadow-md rounded-lg overflow-hidden">
    <thead class="bg-indigo-900 text-white">
      <tr>
        <th class="p-2">No</th> <!-- ? Tambah kolom No -->
        <th class="p-2">ID Anggota</th>
        <th class="p-2">Nama</th>
        <th class="p-2">Jenis Kelamin</th>
        <th class="p-2">Kelas</th>
        <th class="p-2">Alamat</th>
        <th class="p-2">No. HP</th>
        <th class="p-2">Status</th>
        <th class="p-2">Aksi</th>
      </tr>
    </thead>
    <tbody id="tbody-members"></tbody>
  </table>
 <div id="member-pagination" class="mt-3 flex gap-2 flex-wrap"></div>
</section>



    <!-- Tambah Anggota -->
    <section id="page-tambahAnggota" class="hidden">
      <h2 class="text-xl font-bold mb-4"><i class="fas fa-user-plus"></i> Tambah Anggota</h2>
      <form id="form-member" class="bg-white shadow-md rounded-lg p-4 space-y-3">
        <input name="id" type="text" placeholder="ID Anggota" 
               class="w-full p-2 border rounded" required />
        <input name="nama" type="text" placeholder="Nama Lengkap" 
               class="w-full p-2 border rounded" required />
	<select name="kelamin" class="w-full p-2 border rounded" required>
        <option value="">-- Pilih Jenis Kelamin --</option>
        <option value="L">Laki-laki</option>
        <option value="P">Perempuan</option>
        </select>
	<select name="kelas" class="w-full p-2 border rounded">
  	<option value="">-- Pilih Kelas --</option>
  	<option value="Guru">Guru</option>
  	<option value="Kelas 1A">Kelas 1A</option>
  	<option value="Kelas 1B">Kelas 1B</option>
  	<option value="Kelas 2A">Kelas 2A</option>
  	<option value="Kelas 2B">Kelas 2B</option>
  	<option value="Kelas 3A">Kelas 3A</option>
  	<option value="Kelas 3B">Kelas 3B</option>
  	<option value="Kelas 4A">Kelas 4A</option>
  	<option value="Kelas 4B">Kelas 4B</option>
  	<option value="Kelas 5A">Kelas 5A</option>
  	<option value="Kelas 5B">Kelas 5B</option>
  	<option value="Kelas 6A">Kelas 6A</option>
  	<option value="Kelas 6B">Kelas 6B</option>
	</select>
	<input name="alamat" type="text" placeholder="Alamat" 
       	       class="w-full p-2 border rounded" />
        <input name="hp" type="text" placeholder="No. HP" 
               class="w-full p-2 border rounded" />
        <select name="status" class="w-full p-2 border rounded">
          <option value="Aktif">Aktif</option>
          <option value="Nonaktif">Nonaktif</option>
        </select>
        <button class="bg-indigo-900 text-white px-4 py-2 rounded">Simpan</button>
      </form>
    </section>

    <!-- Import/Export Anggota (bantuan) -->
    <section id="page-importAnggota" class="hidden">
      <h2 class="text-xl font-bold mb-4"><i class="fas fa-file-import"></i> Import / Export Data Anggota</h2>
      <p class="text-gray-600">Gunakan tombol import/export di halaman Daftar Anggota.</p>
    </section>

  <!-- area kartu -->
  <section id="page-cetakKartu" class="hidden">
  <h2 class="text-xl font-bold mb-4"><i class="fas fa-id-card"></i> Cetak Kartu Anggota</h2>
  
  <form id="form-kartu" onsubmit="generateCardBarcode(event)" class="space-y-2">
    <input id="kodeAnggota" name="kodeAnggota" type="text" placeholder="Masukkan ID Anggota" class="w-full p-2 border rounded">
    <button class="bg-indigo-900 text-white px-4 py-2 rounded">Generate Kartu</button>
  </form>

  <div id="cardArea" class="mt-4 flex justify-center hidden">
    <div id="kartu-container" class="w-[480px] h-[280px] border rounded shadow relative bg-white">
      <!-- header -->
      <div class="bg-green-600 text-white text-center p-2">
        <h3 class="font-bold text-lg">KARTU ANGGOTA</h3>
        <p>PERPUSTAKAAN SD N 12 Padang Lua</p>
      </div>
      <!-- isi -->
      <div class="p-3 text-sm break-words">
        <p><b>Nama:</b> <span id="kartu-nama"></span></p>
        <p><b>Alamat:</b> <span id="kartu-alamat"></span></p>
        <p><b>No Anggota:</b> <span id="kartu-id"></span></p>
        <div class="mt-2 flex justify-center">
          <svg id="kartu-barcode" class="max-w-full"></svg>
        </div>
      </div>
      <!-- foto -->
      <div class="absolute right-3 bottom-3 w-[90px] h-[120px] border flex items-center justify-center text-xs">
        Pas Foto 3x4
      </div>
    </div>
  </div>

  <!-- tombol kontrol (di luar kartu) -->
  <div class="mt-4 flex gap-2">
    <button id="btnPrintCard" onclick="printCard()" class="hidden bg-blue-600 text-white px-3 py-1 rounded">
  Cetak Kartu
</button>
    <button id="btnCopyCard" onclick="salinDataKartu()" class="hidden bg-green-600 text-white px-3 py-1 rounded">
      Salin Data
    </button>
  </div>
</section>



<!-- Peminjaman -->
<section id="page-peminjaman" class="hidden">
  <h2 class="text-xl font-bold mb-4"><i class="fas fa-book-reader"></i> Form Peminjaman</h2>
  <form id="form-loan" class="bg-white shadow-md rounded-lg p-4 space-y-3">
    <input name="idAnggota" type="text" placeholder="ID Anggota"
           class="w-full p-2 border rounded" required />
    <input name="noInventaris" type="text" placeholder="No Inventaris"
           class="w-full p-2 border rounded" required />
    <input name="tglPinjam" type="date"
           class="w-full p-2 border rounded" required />
    <input name="tglKembali" type="date"
           class="w-full p-2 border rounded" required />
    <button type="submit" class="bg-indigo-900 text-white px-4 py-2 rounded">Simpan</button>
  </form>
</section>

<!-- Pengembalian -->
<section id="page-pengembalian" class="hidden">
  <h2 class="text-xl font-bold mb-4"><i class="fas fa-undo-alt"></i> Form Pengembalian</h2>
  <form id="form-return" class="bg-white shadow-md rounded-lg p-4 space-y-3">
    <input name="idAnggota" type="text" placeholder="ID Anggota"
           class="w-full p-2 border rounded" required />
    <input name="tglKembali" type="date"
           class="w-full p-2 border rounded" required />
    <input name="denda" type="number" placeholder="Denda (Rp)"
           class="w-full p-2 border rounded" />
    <button class="bg-indigo-900 text-white px-4 py-2 rounded">Simpan</button>
  </form>
</section>


<!-- Data Peminjaman -->
<section id="page-dataPeminjaman" class="hidden">
  <h2 class="text-xl font-bold mb-4"><i class="fas fa-database"></i> Data Peminjaman</h2>
  <div class="flex gap-2 mb-3">
    <button onclick="exportDataToFile('loans', 'loans_export')" 
            class="bg-blue-500 px-3 py-1 rounded text-white">Export CSV</button>
    <button onclick="exportDataToXLSX('loans', 'loans_export.xlsx')" 
            class="bg-green-600 px-3 py-1 rounded text-white">Export XLSX</button>
    <button onclick="hapusSemuaPeminjaman()" 
            class="bg-red-600 px-3 py-1 rounded text-white">Hapus Semua</button>
  </div>
  <table class="w-full bg-white shadow-md rounded-lg overflow-hidden">
    <thead class="bg-indigo-900 text-white">
      <tr>
        <th class="p-2">No</th>
        <th class="p-2">ID Anggota</th>
        <th class="p-2">Nama Anggota</th>
        <th class="p-2">Tanggal Pinjam</th>
        <th class="p-2">Tanggal Kembali</th>
	<th class="p-2">Aksi</th> <!-- ? Tambah kolom aksi -->
      </tr>
    </thead>
    <tbody id="tbody-loans"></tbody>
  </table>
</section>


    <!-- Data Pengembalian -->
<section id="page-dataPengembalian" class="hidden">
  <h2 class="text-xl font-bold mb-4"><i class="fas fa-clipboard-check"></i> Data Pengembalian</h2>
  <div class="flex gap-2 mb-3">
    <button onclick="exportDataToFile('returns', 'returns_export')" 
            class="bg-blue-500 px-3 py-1 rounded text-white">Export CSV</button>
    <button onclick="exportDataToXLSX('returns', 'returns_export.xlsx')" 
            class="bg-green-600 px-3 py-1 rounded text-white">Export XLSX</button>
    <button onclick="hapusSemuaPengembalian()" 
            class="bg-red-600 px-3 py-1 rounded text-white">Hapus Semua</button>
  </div>
  <table class="w-full bg-white shadow-md rounded-lg overflow-hidden">
    <thead class="bg-indigo-900 text-white">
      <tr>
        <th class="p-2">No</th>
        <th class="p-2">ID Anggota</th>
        <th class="p-2">Nama Anggota</th>
        <th class="p-2">Tanggal Kembali</th>
        <th class="p-2">Denda</th>
      </tr>
    </thead>
    <tbody id="tbody-returns"></tbody>
  </table>
</section>



    <!-- Perpanjangan -->
    <section id="page-perpanjangan" class="hidden">
      <h2 class="text-xl font-bold mb-4"><i class="fas fa-clock"></i> Perpanjangan Peminjaman</h2>
      <form id="form-extend" class="bg-white shadow-md rounded-lg p-4 space-y-3">
        <input name="idPinjam" type="text" placeholder="ID Pinjam" class="w-full p-2 border rounded" required />
        <input name="tglBaru" type="date" placeholder="Tanggal Baru" class="w-full p-2 border rounded" required />
        <button class="bg-indigo-900 text-white px-4 py-2 rounded">Perpanjang</button>
      </form>
      <!-- ?? Tombol hapus semua perpanjangan -->
      <button onclick="hapusSemuaPerpanjangan()" 
              class="bg-red-600 px-3 py-1 rounded text-white mt-3">Hapus Semua Perpanjangan</button>
    </section>

    <!-- Riwayat -->
<section id="page-riwayat" class="hidden">
  <h2 class="text-xl font-bold mb-4"><i class="fas fa-history"></i> Riwayat Pinjaman</h2>
  <table class="w-full bg-white shadow-md rounded-lg overflow-hidden">
    <thead class="bg-indigo-900 text-white">
      <tr>
        <th class="p-2">No</th>
        <th class="p-2">ID Anggota</th>
        <th class="p-2">Nama Anggota</th>
        <th class="p-2">Judul Buku</th>
        <th class="p-2">Tanggal Pinjam</th>
        <th class="p-2">Tanggal Kembali</th>
      </tr>
    </thead>
    <tbody id="tbody-history"></tbody>
  </table>
  <button onclick="hapusSemuaRiwayat()" 
          class="bg-red-600 text-white px-3 py-1 rounded mt-3">Hapus Semua Riwayat</button>
</section>


    <!-- Laporan Denda -->
    <section id="page-laporanDenda" class="hidden">
      <h2 class="text-xl font-bold mb-4"><i class="fas fa-money-bill-wave"></i> Laporan Denda</h2>
      <table class="w-full bg-white shadow rounded-lg">
        <thead class="bg-indigo-900 text-white">
          <tr>
            <th class="p-2">No</th>
            <th class="p-2">ID Kembali</th>
            <th class="p-2">Denda</th>
          </tr>
        </thead>
        <tbody id="tbody-laporan-denda"></tbody>
      </table>
    </section>

    <!-- Laporan Buku Hilang -->
    <section id="page-laporanBukuHilang" class="hidden">
      <h2 class="text-xl font-bold mb-4"><i class="fas fa-book-dead"></i> Laporan Buku Hilang</h2>
      <table class="w-full bg-white shadow rounded-lg">
        <thead class="bg-indigo-900 text-white">
          <tr>
            <th class="p-2">No</th>
            <th class="p-2">ID Kembali/ID Reservasi</th>
            <th class="p-2">Keterangan</th>
          </tr>
        </thead>
        <tbody id="tbody-laporan-hilang"></tbody>
      </table>
    </section>

    <!-- Laporan Anggota Aktif -->
    <section id="page-laporanAnggotaAktif" class="hidden">
      <h2 class="text-xl font-bold mb-4"><i class="fas fa-user-check"></i> Laporan Anggota Aktif</h2>
      <table class="w-full bg-white shadow rounded-lg">
        <thead class="bg-indigo-900 text-white">
          <tr>
            <th class="p-2">No</th>
            <th class="p-2">ID Anggota</th>
            <th class="p-2">Nama</th>
            <th class="p-2">Total Pinjam</th>
          </tr>
        </thead>
        <tbody id="tbody-laporan-anggota-aktif"></tbody>
      </table>
    </section>



  </main>

  <!-- Script -->
<script src="App.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</body>
</html>
